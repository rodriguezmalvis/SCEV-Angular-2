<app-banner titulo="Cadastrar Produto"></app-banner>
<app-alert [tipo]="alerta.tipo" [header]="alerta.header" [message]="alerta.message"></app-alert>
  <form [formGroup]="formulario">

  <div formGroupName="produto">

  <input formControlName="idProduto" [(ngModel)]="produto.idProduto" type="hidden" class="form-control input-sm" />
  <div class="form-row">
      <div class="form-group col-md-3">
        <label for="titulo">Título</label>
        <input formControlName="titulo" [(ngModel)]="produto.titulo" type="text" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.titulo.invalid}"/>
      </div>
      <div class="form-group col-md-3">
        <label for="autor">Autor</label>
        <input formControlName="autor" [(ngModel)]="produto.autor" type="text" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.autor.invalid}"/>
      </div>
      <div class="form-group col-md-3">
        <label for="paginas">Paginas</label>
        <input formControlName="paginas" [(ngModel)]="produto.paginas" type="number" min="1" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.paginas.invalid}"/>
      </div>
      <div class="form-group col-md-3">
        <label for="formato">Formato</label>
        <input formControlName="formato" [(ngModel)]="produto.formato" type="text" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.formato.invalid}"/>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="isbn">ISBN</label>
        <input formControlName="isbn" [(ngModel)]="produto.isbn" type="text" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.isbn.invalid}"/>
      </div>
      <div class="form-group col-md-4">
        <label for="preco">Preço</label>
        <input [textMask]="{mask: precoMask}" formControlName="preco" [(ngModel)]="produto.preco" type="text" class="form-control input-sm" placeholder="00.00"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.preco.invalid}"/>
      </div>
      <div class="form-group col-md-4">
        <label for="contato">Contato</label>
        <input formControlName="contato" [(ngModel)]="produto.contato" type="text" class="form-control input-sm"
        [ngClass]="{'is-invalid' : formulario.controls.produto.controls.contato.invalid}"/>
      </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-4">
          <label for="file">foto</label>
          <input type="file" class="form-control input-sm-file" id="file" name="file"/>
      </div>
      <div class="form-group col-md-4">
          <label for="tipo">Tipo Produto</label>
          <select formControlName="tipo" [(ngModel)]="produto.tipo" id="tipo" class="form-control input-sm"
          [ngClass]="{'is-invalid' : formulario.controls.produto.controls.tipo.invalid}">
          <option *ngFor="let tipo of tipos.tiposProdutos" value="{{tipo}}">{{tipo}}</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label for="descricao">Sinopse</label>
      <textarea maxlength="500" formControlName="sinopse" [(ngModel)]="produto.sinopse" class="form-control input-sm"
      [ngClass]="{'is-invalid' : formulario.controls.produto.controls.sinopse.invalid}"></textarea>
    </div>

  </div>

  </form>
  <button (click)=cadastra() class="btn btn-success" [disabled]="formulario.invalid">Cadastrar Produto</button>
